# k8s-chat demo values
replicaCount: 1

image:
  repository: callmeradical/demo-k8s-chat
  pullPolicy: IfNotPresent
  tag: "main"

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""

podSecurityContext:
  fsGroup: 1000

securityContext:
  capabilities:
    drop:
    - ALL
  readOnlyRootFilesystem: false
  runAsNonRoot: true
  runAsUser: 1000

service:
  type: NodePort
  port: 3000
  nodePort: 30302

ingress:
  enabled: false

resources:
  limits:
    cpu: 1000m
    memory: 1Gi
  requests:
    cpu: 200m
    memory: 256Mi

# Goose AI configuration
goose:
  provider: "anthropic"
  model: "claude-haiku-3-0"

# API key secret
secrets:
  anthropic:
    create: true
    apiKey: ""
    # External secrets configuration for ArgoCD/GitOps
    external: false
    secretStore: "vault-backend"  # Name of your SecretStore
    externalKey: "anthropic/api-keys"  # Path in external secret manager
    externalProperty: "api-key"  # Property name in the external secret
    refreshInterval: "1h"  # How often to refresh from external source
    annotations: {}
      # argocd.argoproj.io/sync-options: Delete=false  # Prevent ArgoCD from deleting

  # Additional secrets for the service to read
  additional: []
    # Example: Create a new secret
    # - name: "database-credentials"
    #   create: true
    #   envName: "DATABASE_PASSWORD"  # Environment variable name
    #   secretName: "database-credentials"  # K8s secret name
    #   secretKey: "password"  # Key within the secret
    #   type: "Opaque"
    #   data:
    #     password: "my-secret-password"
    #     username: "my-username"
    #   annotations: {}

    # Example: Reference existing secret
    # - name: "external-api-key"
    #   create: false
    #   envName: "EXTERNAL_API_KEY"
    #   secretName: "existing-secret"  # Pre-existing secret in cluster
    #   secretKey: "api-key"
    #   optional: true  # Don't fail if secret doesn't exist

# Environment configuration
env:
  GOOSE_CONFIG_DIR: "/home/goose/.config/goose"
  GOOSE_DATA_DIR: "/home/goose/.local/share/goose"
  KUBECONFIG: "/home/goose/.kube/config"

# Volume mounts
volumes:
  config:
    enabled: true
    mountPath: "/home/goose/.config/goose"
  data:
    enabled: true
    mountPath: "/home/goose/.local/share/goose"
  kubeconfig:
    enabled: true
    mountPath: "/home/goose/.kube"
